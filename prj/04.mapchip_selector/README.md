マップチップの選定と画像作成ツール
==================================

概要
----

`/ORIGINAL_ASSETS/map`配下の画像は、FirstSeedMaterialで配布されていた、RPGツクール想定のマップチップ各種。
自作ゲームで利用するには規模が大きすぎるので、横スクロールゲーム向けに選定して、1枚画像を作成したい。
このプロジェクトでは、そのためのツールを作成する。

操作方法
--------

### 下準備：元画像のパスをjson化する

※シンボリックリンクはGitHub Actionsで削除されるので、実態をコピーして使う

```sh
cp ../../ORIGINAL_ASSETS/map ./CP_ORIGINAL_MAPS
ls -1 ./CP_ORIGINAL_MAPS/* | jq -R . | jq -s . > original_mapchips.json
```

### 起動

リソース読み込みの都合上、Webサーバ上で実行する必要がある

```sh
# Run the following command in the project root (`prj/04.mapchip_selector`) to run the web server:
ruby -run -e httpd #=> Access to http://localhost:8080/index.html
```

### 画面

![](./screen.drawio.svg)

<dl>
<dt>①View切り替え</dt>
<dd>
サイドビュー用とトップビュー用のマップチップを分けて管理しようと思ったけど、、いらないかも。削除したい。
</dd>
<dt>②ソースファイル</dt>
<dd>取得元の複数マップチップ画像の表示と切り替え（⑧ソース画像に作用する）。</dd>
<dt>③スケール変更</dt>
<dd>⑧ソース画像の表示倍率変更。※⑨出力先は未対応</dd>
<dt>④背景選択</dt>
<dd>マップチップの透過部分に表示する画像を選択する（あちこちに作用する）。</dd>
<dt>⑤ソース/出力先切り替え</dt>
<dd>⑧ソース画像と⑨出力先の表示を切り替える。</dd>
<dt>⑥選択チップ一覧</dt>
<dd>⑧ソース画像で選択したチップが並ぶ。</dd>
<dt>⑦チップ詳細</dt>
<dd>チップの詳細の表示と編集。チップ矩形は変更するとNxM矩形を束ねられる。属性（メモ）は使いみちがイマイチ決めきれず。</dd>
<dt>⑧ソース画像</dt>
<dd>選択可能なマップチップ。</dd>
<dt>⑨出力先</dt>
<dd>選択したチップを並べて、自分用のマップチップを作成する。</dd>
</dl>

#### ⑧ソース画像 の操作詳細

- マウスオーバーでカーソル的なものを表示（みやすさのため）
- クリックするとチップ選択（⑥選択チップ一覧に1x1チップとして追加）
  - 選択済みチップの場合、⑦チップ詳細に選択される
  - Shiftクリックすると、⑦チップ詳細で選択されているチップの右下矩形を選択する（📍p2のショートカット）

#### ⑨出力先 の操作詳細

- マウスオーバーでカーソル的なものを表示（みやすさのため）
- クリックした場合：
  - ⑦チップ詳細で選択されているチップを配置する
  - 既に配置されているチップをクリックすると⑦チップ詳細に選択する


自分のマップチップ画像を作成する方法
------------------------------------

`TODO:` ⑨出力先の内容で画像を出力するコマンドを作る？



